<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="siteName">FlagStar å›½æ——ä¹‹æ˜Ÿ - ä»å›½æ——è®¤è¯†ä¸–ç•Œ</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          'Segoe UI Emoji',
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          'Helvetica Neue',
          Arial,
          sans-serif;
        background: linear-gradient(135deg, #002b7d 0%, #0179c8 100%);
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* ä¸»å®¹å™¨ */
      .welcome-container {
        position: relative;
        z-index: 1;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 20px;
      }

      /* ä¸»æ ‡é¢˜åŒºåŸŸ */
      .hero-section {
        margin-bottom: 40px;
        animation: fadeInUp 1s ease-out;
      }

      .title-row {
        display: inline-flex;
        align-items: center;
        gap: 16px;
      }

      .main-title {
        font-size: 4rem;
        font-weight: bold;
        background: linear-gradient(135deg, #ffffff 0%, #e8eef7 50%, #d9e6f7 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 20px;
        text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
      }

      /* è¯­è¨€åˆ‡æ¢å™¨ */
      .language-switcher {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 1000;
      }

      .lang-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
      }

      .lang-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.6s;
      }

      .lang-btn:hover::before {
        left: 100%;
      }

      .lang-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }

      .lang-btn.active {
        background: rgba(232, 168, 72, 0.8);
        border-color: #e8a848;
        box-shadow: 0 4px 12px rgba(232, 168, 72, 0.4);
      }

      .lang-btn:active {
        transform: translateY(0) scale(0.95);
      }

      /* è¯­è¨€åˆ‡æ¢åŠ¨ç”» */
      .language-switching {
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }

      .emoji-globe {
        font-size: 5rem;
        margin-bottom: 20px;
        animation: spin 20s linear infinite;
        display: inline-block;
        filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .subtitle {
        font-size: 1.5rem;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 30px;
        font-weight: 300;
        letter-spacing: 1px;
      }

      /* æ ‡è¯­åŒºåŸŸ */
      .slogan-section {
        margin-bottom: 50px;
        animation: fadeInUp 1s ease-out 0.3s both;
      }

      .feature-slogans {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin: 30px 0;
        max-width: 900px;
      }

      .feature-card {
        background: rgba(255, 255, 255, 0.15);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 25px 20px;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.8s;
      }

      .feature-card:hover::before {
        left: 100%;
      }

      .feature-card:hover {
        transform: translateY(-8px) scale(1.03);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        background: rgba(255, 255, 255, 0.25);
      }

      .feature-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
        display: block;
      }

      .feature-title {
        font-size: 1.2rem;
        color: white;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .feature-desc {
        color: rgba(255, 255, 255, 0.8);
        font-size: 0.95rem;
        line-height: 1.5;
      }

      /* ç†å¿µé˜é‡ŠåŒºåŸŸ */
      .philosophy-section {
        max-width: 900px;
        margin: 50px auto 50px;
        animation: fadeInUp 1s ease-out 0.5s both;
      }

      .philosophy-title {
        font-size: 2rem;
        color: white;
        margin-bottom: 30px;
        font-weight: 600;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      .philosophy-content {
        background: rgba(255, 255, 255, 0.12);
        -webkit-backdrop-filter: blur(15px);
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.25);
        border-radius: 20px;
        padding: 35px 30px;
        text-align: left;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        transition: all 0.4s ease;
      }

      .philosophy-content:hover {
        background: rgba(255, 255, 255, 0.18);
        box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
        transform: translateY(-5px);
      }

      .philosophy-paragraph {
        color: rgba(255, 255, 255, 0.92);
        font-size: 1.08rem;
        line-height: 2;
        margin-bottom: 20px;
        text-indent: 2em;
        letter-spacing: 0.5px;
        position: relative;
      }

      .philosophy-paragraph:last-child {
        margin-bottom: 0;
      }

      /* å…³é”®è¯é«˜äº® - ç»Ÿä¸€å­—ä½“å¤§å°ï¼Œä½¿ç”¨é†’ç›®æ ·å¼çªå‡ºé‡ç‚¹ */
      .philosophy-highlight {
        background: linear-gradient(135deg, #e8a848 0%, #e28031 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 600;
        font-size: 1.08rem;
        text-shadow: 0 2px 8px rgba(232, 168, 72, 0.3);
        padding: 0 2px;
        position: relative;
      }

      /* è¿›å…¥æŒ‰é’® */
      .enter-section {
        animation: fadeInUp 1s ease-out 0.8s both;
      }

      .enter-button {
        background: linear-gradient(135deg, #e8a848 0%, #e28031 100%);
        color: white;
        border: none;
        padding: 20px 50px;
        font-size: 1.3rem;
        font-weight: bold;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 10px 30px rgba(226, 128, 49, 0.4);
        position: relative;
        overflow: hidden;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 25px;
      }

      .enter-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.8s;
      }

      .enter-button:hover::before {
        left: 100%;
      }

      .enter-button:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 20px 50px rgba(226, 128, 49, 0.6);
        background: linear-gradient(135deg, #ffc868 0%, #e28031 100%);
      }

      .enter-button:active {
        transform: translateY(-2px) scale(1.02);
      }

      .button-icon {
        font-size: 1.5rem;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* åº•éƒ¨ä¿¡æ¯ */
      .footer-info {
        margin-top: 40px;
        animation: fadeInUp 1s ease-out 0.9s both;
      }

      .stats-preview {
        display: flex;
        justify-content: center;
        gap: 40px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .stat-item {
        text-align: center;
        color: rgba(255, 255, 255, 0.9);
      }

      .stat-number {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 5px;
        background: linear-gradient(135deg, #e8a848, #e28031);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .stat-label {
        font-size: 0.9rem;
        opacity: 0.8;
      }

      .welcome-footer {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9rem;
        margin-top: 30px;
      }

      /* åŠ¨ç”»å®šä¹‰ */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .main-title {
          font-size: 2.8rem;
        }

        .emoji-globe {
          font-size: 4rem;
        }

        .subtitle {
          font-size: 1.2rem;
        }

        .feature-slogans {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .feature-card {
          padding: 20px 15px;
        }

        .philosophy-section {
          margin: 40px auto;
        }

        .philosophy-title {
          font-size: 1.6rem;
        }

        .philosophy-content {
          padding: 25px 20px;
        }

        .philosophy-paragraph {
          font-size: 1.05rem;
          line-height: 1.9;
        }

        .philosophy-highlight {
          font-size: 1.05rem;
        }

        .enter-button {
          padding: 16px 35px;
          font-size: 1.1rem;
        }

        .stats-preview {
          gap: 25px;
        }

        .stat-number {
          font-size: 1.5rem;
        }
      }

      @media (max-width: 480px) {
        .welcome-container {
          padding: 15px;
        }

        .main-title {
          font-size: 2.2rem;
        }

        .emoji-globe {
          font-size: 3rem;
        }

        .philosophy-section {
          margin: 30px auto;
        }

        .philosophy-title {
          font-size: 1.4rem;
        }

        .philosophy-content {
          padding: 20px 15px;
        }

        .philosophy-paragraph {
          font-size: 1rem;
          line-height: 1.8;
          text-indent: 1.5em;
        }

        .philosophy-highlight {
          font-size: 1rem;
        }

        .enter-button {
          padding: 14px 30px;
          font-size: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="welcome-container">
      <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
      <div class="language-switcher">
        <button class="lang-btn active" data-lang="zh">ä¸­æ–‡</button>
        <button class="lang-btn" data-lang="en">English</button>
      </div>

      <!-- ä¸»æ ‡é¢˜åŒºåŸŸ -->
      <div class="hero-section">
        <div class="title-row">
          <div class="emoji-globe">ğŸŒ</div>
          <h1 class="main-title" data-i18n="welcome.title">FlagStar å›½æ——ä¹‹æ˜Ÿ</h1>
        </div>
        <p class="subtitle" data-i18n="welcome.subtitle">å›½æ——ä¹‹æ˜Ÿç‚¹äº®ä¸–ç•Œï¼</p>
      </div>

      <div class="feature-slogans">
        <div class="feature-card">
          <span class="feature-icon">ğŸ³ï¸â€ğŸŒˆ</span>
          <h3 class="feature-title" data-i18n="welcome.features.browse.title">å›½æ——æµè§ˆ</h3>
          <p class="feature-desc" data-i18n="welcome.features.browse.description">
            è½»æ¾æŒæ¡193ä¸ªå›½å®¶å’Œåœ°åŒºå›½æ——
          </p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸ§ </span>
          <h3 class="feature-title" data-i18n="welcome.features.memory.title">è®°å¿†è®­ç»ƒ</h3>
          <p class="feature-desc" data-i18n="welcome.features.memory.description">
            åˆ†ç±»è®°å¿†å›½æ——ï¼Œè®©å­¦ä¹ æ›´é«˜æ•ˆæŒä¹…
          </p>
        </div>
        <div class="feature-card">
          <span class="feature-icon">ğŸ®</span>
          <h3 class="feature-title" data-i18n="welcome.features.quiz.title">çŸ¥è¯†æµ‹è¯•</h3>
          <p class="feature-desc" data-i18n="welcome.features.quiz.description">
            è‡ªå®šä¹‰æµ‹è¯•ï¼Œåœ¨æ¸¸æˆä¸­æå‡çŸ¥è¯†æ°´å¹³
          </p>
        </div>
      </div>

      <!-- ç†å¿µé˜é‡Š -->
      <div class="philosophy-section">
        <h2 class="philosophy-title" data-i18n="welcome.philosophy.title"></h2>
        <div class="philosophy-content">
          <p class="philosophy-paragraph" data-i18n="welcome.philosophy.paragraph1"></p>
          <p class="philosophy-paragraph" data-i18n="welcome.philosophy.paragraph2"></p>
          <p class="philosophy-paragraph" data-i18n="welcome.philosophy.paragraph3"></p>
          <p class="philosophy-paragraph" data-i18n="welcome.philosophy.paragraph4"></p>
        </div>
      </div>

      <!-- è¿›å…¥æŒ‰é’® -->
      <div class="enter-section">
        <button class="enter-button" id="enterButton">
          <span class="button-icon">ğŸš€</span>
          <span data-i18n="welcome.enterButton">å¼€å¯æ¢ç´¢ä¹‹æ—…</span>
        </button>

        <!-- ç»Ÿè®¡é¢„è§ˆ -->
        <div class="stats-preview">
          <div class="stat-item">
            <div class="stat-number">193</div>
            <div class="stat-label" data-i18n="welcome.stats.countries">å›½å®¶åœ°åŒº</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">16</div>
            <div class="stat-label" data-i18n="welcome.stats.features">ç‰¹å¾åˆ†ç±»</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">7</div>
            <div class="stat-label" data-i18n="welcome.stats.continents">å¤§æ´²åˆ†ç±»</div>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨ä¿¡æ¯ -->
      <div class="footer-info">
        <div class="welcome-footer">
          <p data-i18n="welcome.footer.0">ğŸŒŸ ä»å¸¸è§å›½å®¶åˆ°å†·é—¨åœ°åŒºï¼Œä»åŸºç¡€è®¤çŸ¥åˆ°ä¸“ä¸šæŒæ¡</p>
          <p data-i18n="welcome.footer.1">ğŸ“š ç³»ç»ŸåŒ–å­¦ä¹ è·¯å¾„ï¼Œè®©ä½ æˆä¸ºçœŸæ­£çš„å›½æ——ä¸“å®¶</p>
        </div>
      </div>
    </div>

    <!-- Vite æ¨¡å—åŒ–å…¥å£ -->
    <script type="module" src="/src/index-entry.ts"></script>

    <script>
      // ===== ä½¿ç”¨ç»Ÿä¸€çš„å›½é™…åŒ–ç³»ç»Ÿ =====
      // i18n å®ä¾‹å·²ç»åœ¨ i18n-core.js ä¸­åˆ›å»º

      // i18n å’Œ t å‡½æ•°å·²ç»åœ¨ i18n-core.js ä¸­å…¨å±€å®šä¹‰
      // æ— éœ€é‡å¤åˆ›å»ºå®ä¾‹

      // åŠ è½½å›½é™…åŒ–æ•°æ®
      async function loadI18nData() {
        try {
          console.log('Loading i18n data for index.html...');

          // ç­‰å¾… i18n æ¨¡å—åŠ è½½å®Œæˆ
          let retries = 0;
          while (!window.i18n && retries < 50) {
            await new Promise((resolve) => setTimeout(resolve, 100));
            retries++;
          }

          if (!window.i18n) {
            console.error('i18n module failed to load');
            return;
          }

          const response = await fetch('/data/i18n/i18n.json?t=' + Date.now());
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const translations = await response.json();
          console.log('i18n data loaded successfully for index.html');

          // è®¾ç½®ç¿»è¯‘æ•°æ®åˆ° i18n ç³»ç»Ÿ
          window.i18n.setTranslations(translations);

          // æ¢å¤è¯­è¨€åå¥½
          const savedLang =
            localStorage.getItem('preferredLanguage') ||
            sessionStorage.getItem('currentLanguage') ||
            'zh';
          console.log(`Setting language to: ${savedLang}`);
          window.i18n.setLanguage(savedLang);

          // è®¢é˜…è¯­è¨€å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°ç•Œé¢
          window.i18n.subscribe((newLang) => {
            console.log(`Language changed to: ${newLang}`);
            window.i18n.updateDOM();

            // æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.lang-btn').forEach((btn) => {
              btn.classList.toggle('active', btn.getAttribute('data-lang') === newLang);
            });
          });

          // ç«‹å³æ‰§è¡Œä¸€æ¬¡æ›´æ–°
          window.i18n.updateDOM();

          // åˆå§‹åŒ–è¯­è¨€æŒ‰é’®çŠ¶æ€
          document.querySelectorAll('.lang-btn').forEach((btn) => {
            btn.classList.toggle(
              'active',
              btn.getAttribute('data-lang') === window.i18n.getCurrentLanguage()
            );
          });

          console.log('Modern i18n system initialized successfully for index.html');
        } catch (error) {
          console.error('Failed to load i18n data:', error);
        }
      }

      // è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼ˆä¼˜åŒ–ç‰ˆï¼‰
      document.addEventListener('click', function (e) {
        if (e.target.classList.contains('lang-btn')) {
          const lang = e.target.getAttribute('data-lang');

          // å®‰å…¨æ£€æŸ¥ i18n å¯¹è±¡
          if (!window.i18n) {
            console.warn('i18n not loaded yet');
            return;
          }

          // å¦‚æœè¯­è¨€æ²¡æœ‰å˜åŒ–ï¼Œç›´æ¥è¿”å›
          if (window.i18n.getCurrentLanguage() === lang) {
            return;
          }

          // æ·»åŠ è§†è§‰åé¦ˆ
          const welcomeContainer = document.querySelector('.welcome-container');
          if (welcomeContainer) {
            welcomeContainer.classList.add('language-switching');
          }

          // ä½¿ç”¨æ–°çš„ i18n ç³»ç»Ÿåˆ‡æ¢è¯­è¨€
          if (window.i18n.setLanguage(lang)) {
            console.log(`Language switched to: ${lang}`);

            // ç§»é™¤åˆ‡æ¢åŠ¨ç”»
            setTimeout(() => {
              if (welcomeContainer) {
                welcomeContainer.classList.remove('language-switching');
              }
            }, 300);
          }
        }
      });

      // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', function () {
        loadI18nData();
      });

      // i18n å’Œ t å·²ç»åœ¨ i18n-core.js ä¸­æš´éœ²åˆ°å…¨å±€
      // æ— éœ€é‡å¤æš´éœ²

      // é¡µé¢åŠ è½½å®Œæˆåéšè—åŠ è½½é¡µé¢
      window.addEventListener('load', function () {
        setTimeout(() => {
          const loadingOverlay = document.getElementById('loadingOverlay');
          if (loadingOverlay) {
            loadingOverlay.classList.add('hidden');
          }
        }, 1000);
      });

      // è¿›å…¥æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      document.getElementById('enterButton').addEventListener('click', function () {
        // æ·»åŠ ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
        this.style.transform = 'scale(0.95)';
        setTimeout(() => {
          this.style.transform = '';
        }, 150);

        // å»¶è¿Ÿè·³è½¬ï¼Œæ·»åŠ è¿‡æ¸¡æ•ˆæœ
        setTimeout(() => {
          // ä¼ é€’å½“å‰è¯­è¨€åˆ°ä¸»é¡µé¢ï¼ˆå®‰å…¨æ£€æŸ¥ i18n å¯¹è±¡ï¼‰
          const currentLang =
            window.i18n && window.i18n.getCurrentLanguage
              ? window.i18n.getCurrentLanguage()
              : localStorage.getItem('preferredLanguage') || 'zh';
          localStorage.setItem('preferredLanguage', currentLang);
          sessionStorage.setItem('currentLanguage', currentLang);
          console.log(`Passing language "${currentLang}" to homepage.html`);

          // æˆ–è€…æ˜¾ç¤ºä¸€ä¸ªè¿‡æ¸¡åŠ¨ç”»
          document.body.style.opacity = '0';
          document.body.style.transition = 'opacity 0.8s ease-out';

          setTimeout(() => {
            // å®é™…è·³è½¬é€»è¾‘
            window.location.href = './src/pages/homepage.html';

            // æ¢å¤é¡µé¢æ˜¾ç¤ºï¼ˆæ¼”ç¤ºç”¨ï¼‰
            document.body.style.opacity = '1';
          }, 800);
        }, 200);
      });

      // æ·»åŠ é¼ æ ‡ç§»åŠ¨è§†å·®æ•ˆæœ
      document.addEventListener('mousemove', function (e) {
        const floatingFlags = document.querySelectorAll('.floating-flag');
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;

        floatingFlags.forEach((flag, index) => {
          const speed = (index + 1) * 0.02;
          const x = (e.clientX - centerX) * speed;
          const y = (e.clientY - centerY) * speed;

          flag.style.transform = `translate(${x}px, ${y}px)`;
        });
      });

      // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          document.getElementById('enterButton').click();
        }
      });

      // æ·»åŠ éšæœºé—ªçƒæ•ˆæœåˆ°æµ®åŠ¨å›½æ——
      function addTwinkleEffect() {
        const flags = document.querySelectorAll('.floating-flag');
        flags.forEach((flag) => {
          setInterval(
            () => {
              if (Math.random() > 0.7) {
                flag.style.opacity = '0.3';
                setTimeout(() => {
                  flag.style.opacity = '0.1';
                }, 300);
              }
            },
            3000 + Math.random() * 2000
          );
        });
      }

      // é¡µé¢åŠ è½½å®Œæˆåå¯åŠ¨é—ªçƒæ•ˆæœ
      window.addEventListener('load', addTwinkleEffect);
    </script>
  </body>
</html>
